import { a, b as b$1 } from './chunk-62LSQKNL.js';
import * as b from 'uuid';
import * as t from './events';

const o=class o{constructor(s,e,a,n,d,r,_){b$1(this,"cardId");b$1(this,"origin");b$1(this,"log");b$1(this,"options");b$1(this,"_subscriptions");b$1(this,"_onDestroy");b$1(this,"_onDestroyAll");b$1(this,"id");b$1(this,"_initialized");b$1(this,"_visible");this.cardId=s,this.origin=e,this.log=a,this.options=n,this._subscriptions=d,this._onDestroy=r,this._onDestroyAll=_,this._initialized=!1,this._visible=!1,this.id=b.v4();}get initialized(){return this._initialized}get visible(){return this._visible}create(){return new Promise(s=>{if(this._initialized)return s(this);this._subscriptions[t.Modal.Initialize]=()=>{this._initialized=!0,this.options.visible&&this.show(),s(this);},this._publish(t.Modal.Initialize,{...this.options,id:this.id,visible:this.options.visible||!1,initialized:this._initialized,additionalData:this.options.data});})}destroy(){this._publish(t.Modal.Close),this._onDestroy();}destroyAll(){this._publish(t.Modal.CloseAll),this._onDestroyAll();}show(){this._visible=!0,this._publish(t.Modal.Show,{...this.options,id:this.id,visible:this._visible,initialized:this._initialized,additionalData:this.options.data});}hide(){this._visible=!1,this._publish(t.Modal.Hide);}resize(s={}){this._publish(t.App.Resize,s);}_publish(s,e){parent.postMessage({...e,cardId:this.cardId,type:s,modal:!0,targetModal:!0},this.origin);}};a(o,"KAppModal");let h=o;

export { h as KAppModal };
