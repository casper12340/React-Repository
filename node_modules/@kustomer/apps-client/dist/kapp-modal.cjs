'use strict';

var chunk53A5GD2E_cjs = require('./chunk-53A5GD2E.cjs');
var b = require('uuid');
var t = require('./events');

function _interopNamespace(e) {
	if (e && e.__esModule) return e;
	var n = Object.create(null);
	if (e) {
		Object.keys(e).forEach(function (k) {
			if (k !== 'default') {
				var d = Object.getOwnPropertyDescriptor(e, k);
				Object.defineProperty(n, k, d.get ? d : {
					enumerable: true,
					get: function () { return e[k]; }
				});
			}
		});
	}
	n.default = e;
	return Object.freeze(n);
}

var b__namespace = /*#__PURE__*/_interopNamespace(b);
var t__namespace = /*#__PURE__*/_interopNamespace(t);

const o=class o{constructor(s,e,a,n,d,r,_){chunk53A5GD2E_cjs.b(this,"cardId");chunk53A5GD2E_cjs.b(this,"origin");chunk53A5GD2E_cjs.b(this,"log");chunk53A5GD2E_cjs.b(this,"options");chunk53A5GD2E_cjs.b(this,"_subscriptions");chunk53A5GD2E_cjs.b(this,"_onDestroy");chunk53A5GD2E_cjs.b(this,"_onDestroyAll");chunk53A5GD2E_cjs.b(this,"id");chunk53A5GD2E_cjs.b(this,"_initialized");chunk53A5GD2E_cjs.b(this,"_visible");this.cardId=s,this.origin=e,this.log=a,this.options=n,this._subscriptions=d,this._onDestroy=r,this._onDestroyAll=_,this._initialized=!1,this._visible=!1,this.id=b__namespace.v4();}get initialized(){return this._initialized}get visible(){return this._visible}create(){return new Promise(s=>{if(this._initialized)return s(this);this._subscriptions[t__namespace.Modal.Initialize]=()=>{this._initialized=!0,this.options.visible&&this.show(),s(this);},this._publish(t__namespace.Modal.Initialize,{...this.options,id:this.id,visible:this.options.visible||!1,initialized:this._initialized,additionalData:this.options.data});})}destroy(){this._publish(t__namespace.Modal.Close),this._onDestroy();}destroyAll(){this._publish(t__namespace.Modal.CloseAll),this._onDestroyAll();}show(){this._visible=!0,this._publish(t__namespace.Modal.Show,{...this.options,id:this.id,visible:this._visible,initialized:this._initialized,additionalData:this.options.data});}hide(){this._visible=!1,this._publish(t__namespace.Modal.Hide);}resize(s={}){this._publish(t__namespace.App.Resize,s);}_publish(s,e){parent.postMessage({...e,cardId:this.cardId,type:s,modal:!0,targetModal:!0},this.origin);}};chunk53A5GD2E_cjs.a(o,"KAppModal");let h=o;

exports.KAppModal = h;
